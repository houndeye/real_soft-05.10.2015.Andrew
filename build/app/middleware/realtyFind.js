define(["exports"],function(e){"use strict";function r(e){return c.find({}).where({realtyId:e}).exec(function(e,r){return e?(console.log(e),null):r.length>=1?r:void 0})}function n(){return c.find({}).exec(function(e,r){return e?(console.log(e),null):r})}function t(e){return console.log(e),console.log(e.price.min,e.price.max),o.find({}).where({active:!0}).where("price").gte(e.price.min).lte(e.price.max).exec(function(e,r){return e?(console.error(e),null):r})}function i(){return o.find({}).where({active:!0}).exec(function(e,r){return e?(console.error(e),null):r})}function s(){var e=this.session.userId;return o.find({userId:e},function(e,r){return e?(console.error(e),null):r})}var o=require(__dirname+"/../db/schemas/realties").Realty,c=require(__dirname+"/../db/schemas/imgs").Img,u=new Map([["findAllUserRealty",s],["findAllActiveRealty",i],["findAllActiveRealtyWithParams",t],["getImg",r],["getAllImages",n]]);e.realtyQueryHandler=regeneratorRuntime.mark(function l(e){var r,n,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=this.request.body.fields.queryType,n=this.request.body.fields.queryParams,t=u.get(r).bind(this),i.prev=3,i.next=6,t(n);case 6:this.response.body=i.sent,this.response.status=200,i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](3),console.log(i.t0);case 13:return i.next=15,e;case 15:case"end":return i.stop()}},l,this,[[3,10]])})});