define(["exports"],function(e){"use strict";var s=require(__dirname+"/../db/schemas/users").User,r={user:"",userId:""};e.authorize=regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.session.userId=null,this.session.user=null,t.next=4,s.authorize(this.request.body.fields.username,this.request.body.fields.password);case 4:return r.user=t.sent,r.user&&(this.session.userId=r.user._id,this.session.user=r.user,this.response.status=200,this.response.body=!0),t.next=8,e;case 8:case"end":return t.stop()}},t,this)})});