define(["exports"],function(e){"use strict";function t(e){var t=this.session.userId;return a.saveRealty(e,t)}function r(e){var t=e.realtyId,r=e.realtyParams;return a.updateRealty(r,t)}function n(e){return i.findByIdAndRemove(e).exec(function(e,t){return e?(console.log(e),null):t})}function s(e){return i.findById(e._id,function(e,t){e?console.log(e):(t.active=!Boolean(t.active),t.save(function(e,t){return e?(console.log(e),null):t}))}.bind(this))}var a=require(__dirname+"/../db/models/realties"),i=require(__dirname+"/../db/schemas/realties").Realty,o=new Map([["save",t],["update",r],["remove",n],["switch",s]]);e.realtyQueryHandler=regeneratorRuntime.mark(function u(e){var t,r,n;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.request.body.fields.queryType,r=this.request.body.fields.queryParams,n=o.get(t).bind(this),s.prev=3,s.next=6,n(r);case 6:this.response.body=s.sent,this.response.body?this.response.staus=200:(this.response.staus=200,this.response.body={}),s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](3),console.log(s.t0);case 13:return s.next=15,e;case 15:case"end":return s.stop()}},u,this,[[3,10]])})});