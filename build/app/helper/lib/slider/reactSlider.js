define(["exports"],function(e){"use strict";!function(t,i){"function"==typeof define&&define.amd?define(["react"],i):"object"==typeof e?module.exports=i(require("react")):t.ReactSlider=i(t.React)}(void 0,function(e){function t(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}function i(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}function n(e,t,i){for(var n=(t-e)/(i-1),s=[],r=0;i>r;r++)s.push(e+n*r);return s}function s(e){return null==e?[]:Array.isArray(e)?e:[e]}function r(e){return null!=e&&1===e.length?e[0]:e}var o=e.createClass({displayName:"ReactSlider",propTypes:{min:e.PropTypes.number,max:e.PropTypes.number,step:e.PropTypes.number,minDistance:e.PropTypes.number,defaultValue:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.arrayOf(e.PropTypes.number)]),value:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.arrayOf(e.PropTypes.number)]),orientation:e.PropTypes.oneOf(["horizontal","vertical"]),className:e.PropTypes.string,handleClassName:e.PropTypes.string,handleActiveClassName:e.PropTypes.string,withBars:e.PropTypes.bool,barClassName:e.PropTypes.string,pearling:e.PropTypes.bool,disabledSliderClick:e.PropTypes.bool,disabledMouseDown:e.PropTypes.bool,disabled:e.PropTypes.bool,snapDragDisabled:e.PropTypes.bool,invert:e.PropTypes.bool,onBeforeChange:e.PropTypes.func,onChange:e.PropTypes.func,onAfterChange:e.PropTypes.func,onSliderClick:e.PropTypes.func},getDefaultProps:function(){return{min:0,max:100,step:1,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",handleClassName:"handle",handleActiveClassName:"active",barClassName:"bar",withBars:!1,pearling:!1,disabled:!1,disabledSliderClick:!1,disabledMouseDown:!1,snapDragDisabled:!1,invert:!1}},getInitialState:function(){var e=this._or(s(this.props.value),s(this.props.defaultValue));this.tempArray=e.slice();for(var t=[],i=0;i<e.length;i++)e[i]=this._trimAlignValue(e[i],this.props),t.push(i);return{index:-1,upperBound:0,sliderLength:0,value:e,zIndices:t}},componentWillReceiveProps:function(e){var t=this._or(s(e.value),this.state.value);this.tempArray=t.slice();for(var i=0;i<t.length;i++)this.state.value[i]=this._trimAlignValue(t[i],e);this.state.value.length>t.length&&(this.state.value.length=t.length),0===this.state.upperBound&&this._handleResize()},_or:function(t,i){var s=e.Children.count(this.props.children);switch(s){case 0:return t.length>0?t:i;case t.length:return t;case i.length:return i;default:return(t.length!==s||i.length!==s)&&console.warn(this.constructor.displayName+": Number of values does not match number of children."),n(this.props.min,this.props.max,s)}},componentDidMount:function(){window.addEventListener("resize",this._handleResize),this._handleResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize)},getValue:function(){return r(this.state.value)},_handleResize:function(){window.setTimeout(function(){var e=this.refs.slider.getDOMNode(),t=this.refs.handle0.getDOMNode(),i=e.getBoundingClientRect(),n=this._sizeKey(),s=i[this._posMaxKey()],r=i[this._posMinKey()];this.setState({upperBound:e[n]-t[n],sliderLength:Math.abs(s-r),handleSize:t[n],sliderStart:this.props.invert?s:r})}.bind(this),300)},_calcOffset:function(e){var t=(e-this.props.min)/(this.props.max-this.props.min);return t*this.state.upperBound},_calcValue:function(e){var t=e/this.state.upperBound;return t*(this.props.max-this.props.min)+this.props.min},_buildHandleStyle:function(e,t){var i={position:"absolute",willChange:this.state.index>=0?this._posMinKey():"",zIndex:this.state.zIndices.indexOf(t)+1};return i[this._posMinKey()]=e+"px",i},_buildBarStyle:function(e,t){var i={position:"absolute",willChange:this.state.index>=0?this._posMinKey()+","+this._posMaxKey():""};return i[this._posMinKey()]=e,i[this._posMaxKey()]=t,i},_getClosestIndex:function(e){for(var t=Number.MAX_VALUE,i=-1,n=this.state.value,s=n.length,r=0;s>r;r++){var o=this._calcOffset(n[r]),a=Math.abs(e-o);t>a&&(t=a,i=r)}return i},_calcOffsetFromPosition:function(e){var t=e-this.state.sliderStart;return this.props.invert&&(t=this.state.sliderLength-t),t-=this.state.handleSize/2},_forceValueFromPosition:function(e,t){var i=this._calcOffsetFromPosition(e),n=this._getClosestIndex(i),s=this._trimAlignValue(this._calcValue(i)),r=this.state.value.slice();r[n]=s;for(var o=0;o<r.length-1;o+=1)if(r[o+1]-r[o]<this.props.minDistance)return;this.setState({value:r},t.bind(this,n))},_getMousePosition:function(e){return[e["page"+this._axisKey()],e["page"+this._orthogonalAxisKey()]]},_getTouchPosition:function(e){var t=e.touches[0];return[t["page"+this._axisKey()],t["page"+this._orthogonalAxisKey()]]},_getMouseEventMap:function(){return{mousemove:this._onMouseMove,mouseup:this._onMouseUp}},_getTouchEventMap:function(){return{touchmove:this._onTouchMove,touchend:this._onTouchEnd}},_createOnMouseDown:function(e){return function(i){if(!this.props.disabled){var n=this._getMousePosition(i);this._start(e,n[0]),this._addHandlers(this._getMouseEventMap()),t(i)}}.bind(this)},_createOnTouchStart:function(e){return function(t){if(!(this.props.disabled||t.touches.length>1)){var n=this._getTouchPosition(t);this.startPosition=n,this.isScrolling=void 0,this._start(e,n[0]),this._addHandlers(this._getTouchEventMap()),i(t)}}.bind(this)},_addHandlers:function(e){for(var t in e)document.addEventListener(t,e[t],!1)},_removeHandlers:function(e){for(var t in e)document.removeEventListener(t,e[t],!1)},_start:function(e,t){document.activeElement&&document.activeElement!=document.body&&document.activeElement.blur(),this.hasMoved=!1,this._fireChangeEvent("onBeforeChange");var i=this.state.zIndices;i.splice(i.indexOf(e),1),i.push(e),this.setState({startValue:this.state.value[e],startPosition:t,index:e,zIndices:i})},_onMouseUp:function(){this._onEnd(this._getMouseEventMap())},_onTouchEnd:function(){this._onEnd(this._getTouchEventMap())},_onEnd:function(e){this._removeHandlers(e),this.setState({index:-1},this._fireChangeEvent.bind(this,"onAfterChange"))},_onMouseMove:function(e){var t=this._getMousePosition(e);this._move(t[0])},_onTouchMove:function(e){if(!(e.touches.length>1)){var i=this._getTouchPosition(e);if("undefined"==typeof this.isScrolling){var n=i[0]-this.startPosition[0],s=i[1]-this.startPosition[1];this.isScrolling=Math.abs(s)>Math.abs(n)}if(this.isScrolling)return void this.setState({index:-1});t(e),this._move(i[0])}},_move:function(e){this.hasMoved=!0;var t=this.props,i=this.state,n=i.index,s=i.value,r=s.length,o=s[n],a=e-i.startPosition;t.invert&&(a*=-1);var h=a/(i.sliderLength-i.handleSize)*(t.max-t.min),l=this._trimAlignValue(i.startValue+h),u=t.minDistance;if(!t.pearling){if(n>0){var p=s[n-1];p+u>l&&(l=p+u)}if(r-1>n){var c=s[n+1];l>c-u&&(l=c-u)}}s[n]=l,t.pearling&&r>1&&(l>o?(this._pushSucceeding(s,u,n),this._trimSucceeding(r,s,u,t.max)):o>l&&(this._pushPreceding(s,u,n),this._trimPreceding(r,s,u,t.min))),l!==o&&this.setState({value:s},this._fireChangeEvent.bind(this,"onChange"))},_pushSucceeding:function(e,t,i){var n,s;for(n=i,s=e[n]+t;null!=e[n+1]&&s>e[n+1];n++,s=e[n]+t)e[n+1]=this._alignValue(s)},_trimSucceeding:function(e,t,i,n){for(var s=0;e>s;s++){var r=n-s*i;t[e-1-s]>r&&(t[e-1-s]=r)}},_pushPreceding:function(e,t,i){var n,s;for(n=i,s=e[n]-t;null!=e[n-1]&&s<e[n-1];n--,s=e[n]-t)e[n-1]=this._alignValue(s)},_trimPreceding:function(e,t,i,n){for(var s=0;e>s;s++){var r=n+s*i;t[s]<r&&(t[s]=r)}},_axisKey:function(){var e=this.props.orientation;return"horizontal"===e?"X":"vertical"===e?"Y":void 0},_orthogonalAxisKey:function(){var e=this.props.orientation;return"horizontal"===e?"Y":"vertical"===e?"X":void 0},_posMinKey:function(){var e=this.props.orientation;return"horizontal"===e?this.props.invert?"right":"left":"vertical"===e?this.props.invert?"bottom":"top":void 0},_posMaxKey:function(){var e=this.props.orientation;return"horizontal"===e?this.props.invert?"left":"right":"vertical"===e?this.props.invert?"top":"bottom":void 0},_sizeKey:function(){var e=this.props.orientation;return"horizontal"===e?"clientWidth":"vertical"===e?"clientHeight":void 0},_trimAlignValue:function(e,t){return this._alignValue(this._trimValue(e,t),t)},_trimValue:function(e,t){return t=t||this.props,e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e},_alignValue:function(e,t){t=t||this.props;var i=(e-t.min)%t.step,n=e-i;return 2*Math.abs(i)>=t.step&&(n+=i>0?t.step:-t.step),parseFloat(n.toFixed(5))},_renderHandle:function(t,i,n){var s=this.props.handleClassName+" "+(this.props.handleClassName+"-"+n)+" "+(this.state.index===n?this.props.handleActiveClassName:"");return e.createElement("div",{ref:"handle"+n,key:"handle"+n,className:s,style:t,onMouseDown:this._createOnMouseDown(n),onTouchStart:this._createOnTouchStart(n)},i)},_renderHandles:function(t){for(var i=t.length,n=this.tempArray,s=0;i>s;s++)n[s]=this._buildHandleStyle(t[s],s);var r=this.tempArray,o=this._renderHandle;if(e.Children.count(this.props.children)>0)e.Children.forEach(this.props.children,function(e,t){r[t]=o(n[t],e,t)});else for(s=0;i>s;s++)r[s]=o(n[s],null,s);return r},_renderBar:function(t,i,n){return e.createElement("div",{key:"bar"+t,ref:"bar"+t,className:this.props.barClassName+" "+this.props.barClassName+"-"+t,style:this._buildBarStyle(i,this.state.upperBound-n)})},_renderBars:function(e){var t=[],i=e.length-1;t.push(this._renderBar(0,0,e[0]));for(var n=0;i>n;n++)t.push(this._renderBar(n+1,e[n],e[n+1]));return t.push(this._renderBar(i+1,e[i],this.state.upperBound)),t},_onSliderMouseDown:function(e){if(!this.props.disabled&&!this.props.disabledMouseDown){if(this.hasMoved=!1,!this.props.snapDragDisabled){var i=this._getMousePosition(e);this._forceValueFromPosition(i[0],function(e){this._fireChangeEvent("onChange"),this._start(e,i[0]),this._addHandlers(this._getMouseEventMap())}.bind(this))}t(e)}},_onSliderClick:function(e){if(!this.props.disabled&&this.props.onSliderClick&&!this.hasMoved){var t=this._getMousePosition(e),i=this._trimAlignValue(this._calcValue(this._calcOffsetFromPosition(t[0])));this.props.onSliderClick(i)}},_fireChangeEvent:function(e){this.props[e]&&this.props[e](r(this.state.value))},render:function(){for(var t=this.state,i=this.props,n=this.tempArray,s=t.value,r=s.length,o=0;r>o;o++)n[o]=this._calcOffset(s[o],o);var a=i.withBars?this._renderBars(n):null,h=this._renderHandles(n);return e.createElement("div",{ref:"slider",style:{position:"relative"},className:i.className+(i.disabled?" disabled":""),onMouseDown:this._onSliderMouseDown,onClick:this._onSliderClick},a,h)}});return o})});