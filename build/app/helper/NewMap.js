define(["exports","module","react"],function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(a);t.exports=o["default"].createClass({displayName:"NewMap",getInitialState:function(){return{map:null,markers:[]}},getDefaultProps:function(){return{lat:49.839683,lng:24.029717000000005,zoom:13,width:500,height:500,gmaps_api_key:"",gmaps_sensor:!1}},onChange:function(){var e=new google.maps.places.SearchBox(o["default"].findDOMNode(this.refs.input));google.maps.event.addListener(e,"places_changed",function(){var t=e.getPlaces();return 0==t.length?!1:void this.updateMarkers(t)}.bind(this))},updateMarkers:function(e){var t=this.state.markers,a=this.state.map;return null===a?!1:(t.forEach(function(e){e.setMap(null)}),this.setState({markers:[]}),e.forEach(function(s){a.setCenter(s.geometry.location);var o=new google.maps.Marker({position:s.geometry.location,map:a,title:e.label});t.push(o)}),this.setState({markers:t}),this.props.dbActions&&(e[0].geometry.location.hasOwnProperty("H")?this.props.dbActions({lat:e[0].geometry.location.H,lng:e[0].geometry.location.L}):this.props.dbActions({lat:e[0].geometry.location.G,lng:e[0].geometry.location.K})),void(this.props.RefluxAction&&this.props.RefluxAction(e[0].address_components)))},render:function(){var e={width:this.props.width,height:this.props.height};return o["default"].createElement("div",null,o["default"].createElement("input",{id:"pac-input",className:"controls",type:"text",placeholder:"Search Box",ref:"input",onChange:this.onChange}),o["default"].createElement("div",{id:"map-canvas",style:e,ref:"mapContainer"}))},componentWillUpdate:function(){if(this.props.place&&this.state.map){var e=new google.maps.Marker({position:this.props.place});this.state.map.setCenter(this.props.place?this.props.place:new google.maps.LatLng(this.props.lat,this.props.lng),this.props.zoom),e.setMap(this.state.map)}},componentDidMount:function(){var e=function(){var e={zoom:this.props.zoom,center:this.props.place?this.props.place:new google.maps.LatLng(this.props.lat,this.props.lng),mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(o["default"].findDOMNode(this.refs.mapContainer),e);if(this.setState({map:t}),this.props.place&&this.state.map){var a=new google.maps.Marker({position:this.props.place});a.setMap(t),this.props.place=void 0}}.bind(this);if("undefined"!=typeof google)e();else{if(!window.reactMapCallback){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key="+this.props.gmaps_api_key+"&sensor="+this.props.gmaps_sensor+"&libraries=places&callback=reactMapCallback",document.head.appendChild(t),window.reactMapCallbacks=[],window.reactMapCallback=function(){for(;window.reactMapCallbacks.length>0;)window.reactMapCallbacks.shift()()}}window.reactMapCallbacks.push(e)}},componentWillReceiveProps:function(e){e.points&&this.updateMarkers(e.points)}})});