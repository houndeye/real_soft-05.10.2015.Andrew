define(["exports","module","reflux","../../../Stores/MyOffice/Realty/ImageDb","../../../Actions/MyOffice/Realty/ImageDb","../../../Actions/MyOffice/Realty/realtyDb","../../../Actions/dbRealtyActions","../../../helper/ajax"],function(e,a,t,s,n,o,r,l){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,a){for(var t in a)e[t]=a[t];return e}var d=i(t),f=(i(s),i(n)),c=i(o),y=i(r),m={mapCoordinates:"",address:"",params:""};a.exports=d["default"].createStore({listenables:[c["default"]],onGetRealtyCoordinate:function(e){m.mapCoordinates=e},onGetRealtyAddress:function(e){m.address=e},onGetRealtyParams:function(e){m.params=e},getRealtyParams:function(){var e={};return e=u(e,m.params),e.address=m.address,e.mapCoordinates=m.mapCoordinates,e},validateRealtyParams:function(e){var a=["address","mapCoordinates","price","area"],t=!0;return a.forEach(function(a){console.log(e[a]),e[a]||(t=!1)}),t},onSaveRealty:function(){var e=this.getRealtyParams();this.validateRealtyParams(e)&&l.DbRequest("Realty","save",e).done(function(e,a){"success"==a&&(f["default"].saveImages(e._id),setTimeout(y["default"].findAllUserRealty,300))})},onChangeRealtyActiveParam:function(e){l.DbRequest("Realty","switch",e).done(function(e,a){"success"==a&&setTimeout(y["default"].findAllUserRealty,300)})},onUpdateRealty:function(e){var a=this.getRealtyParams(),t=e._id;l.DbRequest("Realty","update",{realtyParams:a,realtyId:t}).done(function(e,a){"success"==a&&(f["default"].updateImages(),setTimeout(y["default"].findAllUserRealty,300))})},onRemoveRealty:function(e){l.DbRequest("Realty","remove",e).done(function(e,a){"success"==a&&(f["default"].removeImages(),setTimeout(y["default"].findAllUserRealty,300))})}})});